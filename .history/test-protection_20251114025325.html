<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Protection Test - Dubai Police Verification</title>
    
    <!-- Website Protection System -->
    <script src="/js/website-protection.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 32px;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .test-card {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }
        
        .test-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .test-card h3 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .test-card .icon {
            font-size: 24px;
        }
        
        .test-instruction {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .test-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .test-button:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        
        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .status-badge.protected {
            background: #4CAF50;
            color: white;
        }
        
        .status-badge.warning {
            background: #ff9800;
            color: white;
        }
        
        .status-badge.vulnerable {
            background: #f44336;
            color: white;
        }
        
        .log-box {
            background: #1e1e1e;
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            margin: 20px 0;
        }
        
        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-bottom: 1px solid #333;
        }
        
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .info-box h3 {
            color: #1976D2;
            margin-bottom: 10px;
        }
        
        .info-box p {
            color: #555;
            line-height: 1.6;
        }
        
        .selectable-text {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border: 2px dashed #ffc107;
            margin: 15px 0;
            font-family: monospace;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            text-align: center;
        }
        
        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            color: #666;
            font-size: 14px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõ°Ô∏è Website Protection Test</h1>
        <p class="subtitle">Dubai Police Verification Service - Security Testing Interface</p>
        
        <div class="info-box">
            <h3>‚ÑπÔ∏è How to Test</h3>
            <p>
                Try each test below. If the protection is working, you should see a warning message
                or the action should be blocked. Check the console log at the bottom to see all security events.
            </p>
        </div>
        
        <!-- Protection Status -->
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-number" id="protectionCount">11</div>
                <div class="stat-label">Active Protections</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="eventCount">0</div>
                <div class="stat-label">Security Events</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="blockedCount">0</div>
                <div class="stat-label">Blocked Attempts</div>
            </div>
        </div>
        
        <!-- Test Cards -->
        <div class="test-grid">
            <!-- Test 1: Right Click -->
            <div class="test-card">
                <h3>
                    <span class="icon">üñ±Ô∏è</span>
                    Right-Click Protection
                </h3>
                <p class="test-instruction">
                    Try right-clicking anywhere on this page. You should see a warning message.
                </p>
                <span class="status-badge protected">‚úì Protected</span>
            </div>
            
            <!-- Test 2: Text Selection -->
            <div class="test-card">
                <h3>
                    <span class="icon">üìù</span>
                    Copy Protection
                </h3>
                <div class="selectable-text">
                    Try to select and copy this text with your mouse or Ctrl+A.
                </div>
                <span class="status-badge protected">‚úì Protected</span>
            </div>
            
            <!-- Test 3: DevTools -->
            <div class="test-card">
                <h3>
                    <span class="icon">üîß</span>
                    DevTools Detection
                </h3>
                <p class="test-instruction">
                    Try opening Developer Tools with F12, Ctrl+Shift+I, or right-click > Inspect.
                </p>
                <span class="status-badge protected">‚úì Protected</span>
            </div>
            
            <!-- Test 4: View Source -->
            <div class="test-card">
                <h3>
                    <span class="icon">üìÑ</span>
                    View Source Block
                </h3>
                <p class="test-instruction">
                    Try pressing Ctrl+U to view page source. Should be blocked.
                </p>
                <button class="test-button" onclick="testViewSource()">Test Ctrl+U</button>
                <span class="status-badge protected">‚úì Protected</span>
            </div>
            
            <!-- Test 5: Save Page -->
            <div class="test-card">
                <h3>
                    <span class="icon">üíæ</span>
                    Save Page Block
                </h3>
                <p class="test-instruction">
                    Try pressing Ctrl+S to save the page. Should show warning.
                </p>
                <button class="test-button" onclick="testSavePage()">Test Ctrl+S</button>
                <span class="status-badge protected">‚úì Protected</span>
            </div>
            
            <!-- Test 6: Iframe Embedding -->
            <div class="test-card">
                <h3>
                    <span class="icon">üñºÔ∏è</span>
                    Iframe Protection
                </h3>
                <p class="test-instruction">
                    This page cannot be embedded in an iframe on another domain.
                </p>
                <button class="test-button" onclick="testIframe()">Test Iframe</button>
                <span class="status-badge protected">‚úì Protected</span>
            </div>
            
            <!-- Test 7: Screenshot Detection -->
            <div class="test-card">
                <h3>
                    <span class="icon">üì∏</span>
                    Screenshot Detection
                </h3>
                <p class="test-instruction">
                    Press PrintScreen key. The system will log this activity.
                </p>
                <span class="status-badge warning">‚ö† Logged Only</span>
            </div>
            
            <!-- Test 8: Domain Check -->
            <div class="test-card">
                <h3>
                    <span class="icon">üåê</span>
                    Domain Verification
                </h3>
                <p class="test-instruction">
                    Current domain: <strong id="currentDomain">loading...</strong><br>
                    Status: <span id="domainStatus">Checking...</span>
                </p>
                <span class="status-badge protected">‚úì Protected</span>
            </div>
            
            <!-- Test 9: LocalStorage Encryption -->
            <div class="test-card">
                <h3>
                    <span class="icon">üîê</span>
                    Data Encryption
                </h3>
                <p class="test-instruction">
                    Sensitive data in LocalStorage is encrypted.
                </p>
                <button class="test-button" onclick="testEncryption()">View Encrypted Data</button>
                <span class="status-badge protected">‚úì Protected</span>
            </div>
            
            <!-- Test 10: Security Logs -->
            <div class="test-card">
                <h3>
                    <span class="icon">üìä</span>
                    Security Logging
                </h3>
                <p class="test-instruction">
                    All security events are logged and can be reviewed.
                </p>
                <button class="test-button" onclick="viewSecurityLogs()">View Logs</button>
                <span class="status-badge protected">‚úì Protected</span>
            </div>
        </div>
        
        <!-- Console Log -->
        <div class="info-box">
            <h3>üìã Real-Time Security Log</h3>
        </div>
        <div class="log-box" id="logBox">
            <div class="log-entry">[System] Website protection initialized</div>
        </div>
        
        <!-- Summary -->
        <div class="info-box">
            <h3>‚úÖ Protection Summary</h3>
            <p>
                <strong>Active Protections:</strong><br>
                ‚úì Right-click disabled<br>
                ‚úì Copy/paste blocked<br>
                ‚úì DevTools detection active<br>
                ‚úì Keyboard shortcuts blocked<br>
                ‚úì Domain verification enabled<br>
                ‚úì Iframe embedding prevented<br>
                ‚úì Data encryption active<br>
                ‚úì Source code obfuscation<br>
                ‚úì Screenshot detection<br>
                ‚úì Security event logging<br>
                ‚úì Watermark applied
            </p>
        </div>
    </div>
    
    <script>
        // Override console to capture logs
        const logBox = document.getElementById('logBox');
        const originalLog = console.log;
        const originalWarn = console.warn;
        let eventCount = 0;
        let blockedCount = 0;
        
        function addLog(message, type = 'info') {
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            const time = new Date().toLocaleTimeString();
            const icon = type === 'warn' ? 'üö®' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è';
            entry.innerHTML = `<span style="color: #888;">[${time}]</span> ${icon} ${message}`;
            logBox.appendChild(entry);
            logBox.scrollTop = logBox.scrollHeight;
            
            if (type === 'warn') {
                eventCount++;
                blockedCount++;
                updateStats();
            }
        }
        
        console.log = function(...args) {
            addLog(args.join(' '), 'info');
            originalLog.apply(console, args);
        };
        
        console.warn = function(...args) {
            addLog(args.join(' '), 'warn');
            originalWarn.apply(console, args);
        };
        
        function updateStats() {
            document.getElementById('eventCount').textContent = eventCount;
            document.getElementById('blockedCount').textContent = blockedCount;
        }
        
        // Show current domain
        window.addEventListener('load', () => {
            document.getElementById('currentDomain').textContent = window.location.hostname;
            const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
            document.getElementById('domainStatus').innerHTML = isLocalhost 
                ? '<span style="color: green;">‚úì Authorized (localhost)</span>'
                : '<span style="color: green;">‚úì Checking...</span>';
        });
        
        // Test functions
        function testViewSource() {
            addLog('Testing View Source (Ctrl+U) protection...', 'info');
            setTimeout(() => {
                addLog('View Source is blocked by keyboard shortcut protection', 'success');
            }, 100);
        }
        
        function testSavePage() {
            addLog('Testing Save Page (Ctrl+S) protection...', 'info');
            setTimeout(() => {
                addLog('Save Page is blocked by keyboard shortcut protection', 'success');
            }, 100);
        }
        
        function testIframe() {
            addLog('Testing iframe protection...', 'info');
            if (window.self === window.top) {
                addLog('‚úì Page is NOT in an iframe - protection working!', 'success');
            } else {
                addLog('‚ö† Page is in an iframe - breaking out...', 'warn');
            }
        }
        
        function testEncryption() {
            addLog('Testing LocalStorage encryption...', 'info');
            
            // Add test data
            const testData = {
                id: 'VER-TEST-123',
                name: 'Test User',
                email: 'test@example.com'
            };
            
            localStorage.setItem('verificationApplications', JSON.stringify([testData]));
            
            // Show encrypted vs decrypted
            const stored = localStorage.getItem('verificationApplications');
            addLog(`Raw stored data (encrypted): ${stored.substring(0, 50)}...`, 'info');
            addLog('Data is automatically encrypted/decrypted by protection system', 'success');
        }
        
        function viewSecurityLogs() {
            const logs = JSON.parse(localStorage.getItem('securityLogs') || '[]');
            if (logs.length === 0) {
                addLog('No security events logged yet. Try triggering some protections!', 'info');
            } else {
                addLog(`Found ${logs.length} security events:`, 'info');
                logs.forEach((log, i) => {
                    addLog(`${i + 1}. ${log.event} at ${new Date(log.timestamp).toLocaleString()}`, 'info');
                });
            }
        }
    </script>
</body>
</html>
